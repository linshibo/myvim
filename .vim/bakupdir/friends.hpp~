#ifndef _FRIENDS_HPP_
#define _FRIENDS_HPP_
#include    "proto/ultraman_online.h"
#include    "proto/ultraman_online_enum.h"
#define     FORBID_ADD_FRIEND(flag) (((flag)>>(flag_forbid_add_friend-1))&1)
class player_t;
static inline uint64_t gen_key_by_uid_role(uint32_t user_id, uint32_t role_tm)
{       
    uint64_t key = user_id;
    key = (key << 32) | role_tm;
    return key;
}   
    
inline uint32_t get_uid_from_key(uint64_t key)
{       
    return (key >> 32);
}   
inline uint32_t get_role_tm_from_key(uint64_t key)
{   
    return (key & 0xFFFFFFFF);
}
int do_add_friend(player_t *p, uint32_t user_id, uint32_t role_tm, uint32_t forbid_friends_me);

int do_add_to_blacklist(player_t *p, uint32_t user_id, uint32_t role_tm);

int update_recently_contacted_list_chat(std::vector<uint64_t> *recently_contacted, uid_role_t *user_info);
int update_recently_contacted_list_cli(std::vector<uint64_t> *recently_contacted);

#endif /*_FRIENDS_HPP_ END*/
