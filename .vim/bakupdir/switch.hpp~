/**
 * =====================================================================================
 *
 * @file  switch.hpp
 *
 * @brief 处理和switch服务器相关的命令
 *
 * compiler  GCC4.1.2
 * platform  Linux
 *
 * copyright:  TaoMee, Inc. ShangHai CN. All rights reserved.
 * 		
 * =====================================================================================
 */

#ifndef  SWITCH_HPP_
#define  SWITCH_HPP_

#include <libtaomee++/proto/Ccmd_map.h>
#include <libtaomee++/proto/proto_base.h>
#include <libtaomee++/proto/proto_util.h>

#include "player.hpp"



//-------------------------------------------------------
//函数定义
#undef  BIND_PROTO_CMD
#define BIND_PROTO_CMD(cmdid,proto_name,c_in,c_out,md5_tag,bind_bitmap )\
	int proto_name( player_t *p,  Cmessage* p_in, uint32_t ret);
#include "../proto/ultraman_switch_bind_sw_for_online.h" 




extern int switch_fd;

class Cmessage;

void handle_switch_return(svr_proto_header_t * data, uint32_t len);

int connect_to_switch(void* owner, void* data);

int connect_to_switch_timely(void* owner, void* data);

void init_switch_handle_funs();

int send_msg_to_switch(player_t *p, uint16_t cmd, Cmessage* msg,  userid_t user_id);

int send_sw_keepalive_pkg(void* owner, void* data);

int svr_proto_user_login_report(player_t *p);
int svr_proto_user_logout_report(player_t *p, Cmessage* c_in);



#endif   /* SWITCH_HPP_ */

