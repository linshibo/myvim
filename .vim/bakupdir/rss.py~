# -*- coding:utf-8 -*-
import Tkinter
import urllib
import xml.parsers.expat

class MyXML:									#  
	def __init__(self, edit):
		self.parser = xml.parsers.expat.ParserCreate()			# XMLParser
		self.parser.StartElementHandler = self.start			# 
		self.parser.EndElementHandler = self.end			# 
		self.parser.CharacterDataHandler = self.data		   
		self.title = False					 
		self.description = False
		self.date = False
		self.edit = edit					  
	def start(self, name, attrs):			
		if name == 'title':				 
			self.title = True			  
		elif name == 'description':
			self.description = Tru
		elif name == 'pubDate':  
			self.date = True	
		else:
			pass
	def end(self, name):	   
		if name == 'title':
			self.title = False  
		elif name == 'description':
			self.description = False
		elif name == 'pubDate':
			self.date = False		 
		else:
			pass
	def data(self,data):			 
		if self.title:			  
			self.edit.insert(Tkinter.END,
					'******************************\n')
			self.edit.insert(Tkinter.END, 'Title: ')
			self.edit.insert(Tkinter.END, data + '\n')
		elif self.description:
			self.edit.insert(Tkinter.END, 'Data: ')
			self.edit.insert(Tkinter.END, data + '\n')
		elif self.date:
			self.edit.insert(Tkinter.END, 'Date: ')
			self.edit.insert(Tkinter.END, data + '\n')
		else:
			pass
	def feed(self, data):
		self.parser.Parse(data, 0)
class Window:
	def __init__(self, root):
		self.root = root		   
		self.entryUrl = Tkinter.Entry(root,width = 30)
		self.entryUrl.place(x = 65, y = 15)
		self.get = Tkinter.Button(root,
				text = '读取RSS', command = self.Get, font = ('system','10'))
		self.get.place(x = 350, y = 15)
		self.frame = Tkinter.Frame(root, bd=2)
		self.scrollbar = Tkinter.Scrollbar(self.frame)
		self.edit = Tkinter.Text(self.frame,yscrollcommand = self.scrollbar.set,
				width = 96, height = 32)
		self.scrollbar.config(command=self.edit.yview)
		self.edit.pack(side = Tkinter.LEFT)
		self.scrollbar.pack(side=Tkinter.RIGHT, fill=Tkinter.Y)
		self.frame.place(y = 50)
	def Get(self):
		url = self.entryUrl.get()
		page = urllib.urlopen(url)		 
		data = page.read()				
		parser = MyXML(self.edit)		
		parser.feed(data)			   
		page.close()
root = Tkinter.Tk()
url = "http://blog.youxu.info/feed/"
page = urllib.urlopen()		 
data = page.read()				
parser = MyXML(self.edit)		
parser.feed(data)			   
page.close()

#root.title('RSS 阅读器')
#window = Window(root)
#root.minsize(700,500)
#root.maxsize(700,500)
#root.mainloop()
