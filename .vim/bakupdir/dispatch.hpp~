/*
* =====================================================================================
*
*  @file  dispatch.hpp 
*
*  @brief  
*
*  compiler  gcc4.3.2 
*	
*  platform  Linux
*
* copyright:  TaoMee, Inc. ShangHai CN. All rights reserved
*
* =====================================================================================
*/

#ifndef  DISPATCH_HPP_
#define  DISPATCH_HPP_

extern "C" {
#include <stdint.h>
#include <libtaomee/project/types.h>
}




enum {
	pkg_size    = 8192,  /* 最大包长 */
};

typedef uint32_t userid_t; 


#pragma pack(1)

/** @brief 服务器间通信协议头
*/
struct svr_proto_header_t { 
	uint32_t len; /*协议总长度*/
	uint32_t seq; /*序列号*/
	uint16_t cmd; /*命令号*/
	uint32_t ret; /*返回值*/
	userid_t uid; /*米米号*/
	uint16_t areaid; /*online服务器分区号*/
};

struct db_proto_header_t { 
	uint32_t len; /*协议总长度*/
	uint32_t seq; /*序列号*/
	uint16_t cmd; /*命令号*/
	uint32_t ret; /*返回值*/
	userid_t uid; /*米米号*/
	uint16_t areaid; /*online服务器分区号*/
	uint32_t role_tm;
};


#pragma pack()


int dispatch(void *data, fdsession_t *fdsess);

void init_cli_handle_funs();


#endif   // ----- #end SWITCH_HPP_  ----- 






