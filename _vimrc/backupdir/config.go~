package config

import (
    "encoding/json"
    "fmt"
    "io/ioutil"
)

var Config Configure
type PlatformConfig struct {
    Platform       string
    DBUser         string
    DBPasswd       string
    DBHost         string
    DBDatabase     string
    GameServerHost string
}

type Configure struct {
    LogLevel       int
    Platforms      PlatformConfig 
    BindAddr       string
    FileAddr       string
    RedisHost      string
    User           string
    Passwd         string
}

func Load(FileName string) bool {
    content, err := ioutil.ReadFile(FileName)
    if err != nil {
        fmt.Println("Failed read config file bench.conf:", err)
        return false
    }
    err = json.Unmarshal(content, &Config)
    if err != nil {
        fmt.Println("Failed decode config file to Config", err)
        return false
    }
    return true
}
